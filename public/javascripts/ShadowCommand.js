// Generated by CoffeeScript 1.6.3
(function() {
  define(["fabric", "EventEmitter"], function(fabric, event_emitter) {
    var ShadowCommand;
    return ShadowCommand = (function() {
      function ShadowCommand(on_deactivate) {
        this.on_deactivate = on_deactivate;
      }

      ShadowCommand.prototype.activate = function(collage_item) {
        var item, shadow, stage;
        this.collage_item = collage_item;
        stage = this.collage_item.stage;
        item = this.collage_item.item;
        shadow = {
          color: "rgba(0,0,0,0.5)",
          offsetX: 10,
          offsetY: 10,
          blur: 20,
          affectStroke: true
        };
        if (this.has_shadow(item)) {
          item.setShadow(null);
        } else {
          item.setShadow(shadow);
        }
        return stage.renderAll();
      };

      ShadowCommand.prototype.has_shadow = function(item) {
        var shadow;
        shadow = item.shadow;
        if (shadow === null) {
          return false;
        }
        if (shadow.color === 'rgb(0,0,0)') {
          return false;
        }
        return true;
      };

      ShadowCommand.prototype.deactivate = function(collage_item) {
        this.collage_item = collage_item;
      };

      return ShadowCommand;

    })();
  });

}).call(this);
