// Generated by CoffeeScript 1.4.0
(function() {

  define(['require', 'jquery', 'EventEmitter'], function(require, $, event_emitter) {
    var ToolbarItem;
    return ToolbarItem = (function() {

      function ToolbarItem(toolbar, command_name) {
        var _this = this;
        this.toolbar = toolbar;
        this.command_name = command_name;
        require([this.command_name + "-submenu"], function(SubMenu) {
          return _this.submenu = new SubMenu();
        });
        require([this.command_name + "-command"], function(Cmd) {
          return _this.command = new Cmd(function() {
            return _this.hide_submenu();
          }, function() {
            return _this.hide_submenu();
          });
        });
      }

      ToolbarItem.prototype.show_submenu = function() {
        this.toolbar.hide_menu();
        return this.submenu.show();
      };

      ToolbarItem.prototype.hide_submenu = function() {
        this.submenu.hide();
        return this.toolbar.show_menu();
      };

      ToolbarItem.prototype.activate = function(canvas_item) {
        var _this = this;
        this.show_submenu();
        return this.command.activate(canvas_item, function() {
          return _this.hide_submenu();
        });
      };

      ToolbarItem.prototype.deactivate = function(canvas_item) {
        this.hide_submenu();
        return this.command.deactivate();
      };

      return ToolbarItem;

    })();
  });

}).call(this);
